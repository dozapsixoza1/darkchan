<!DOCTYPE html>
<html>
<head>
    <title>Recoil –§–æ—Ä—É–º</title>
</head>
<body>
    {% if username %}
        <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ emoji }} {{ username }} ({{ role }})</h1>
        <a href="/roles">–í—Å–µ —Ä–æ–ª–∏</a> | <a href="/logout">–í—ã–π—Ç–∏</a>
    {% else %}
        <form method="POST" action="/login">
            <input name="username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required>
            <select name="role">
                {% for r, icon in roles.items() %}
                <option value="{{ r }}">{{ icon }} {{ r }}</option>
                {% endfor %}
            </select>
            <button type="submit">–í–æ–π—Ç–∏</button>
        </form>
    {% endif %}
</body>
</html>

  <!DOCTYPE html>
<html>
<head><title>–†–æ–ª–∏ —Ñ–æ—Ä—É–º–∞</title></head>
<body>
<h1>–†–æ–ª–∏ —Ñ–æ—Ä—É–º–∞ Recoil</h1>
<ul>
{% for role, icon in roles.items() %}
<li>{{ icon }} <b>{{ role }}</b> ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–ª–∏</li>
{% endfor %}
</ul>
<a href="/">–ù–∞–∑–∞–¥</a>
</body>
</html>

 
from flask import Flask, render_template, request, redirect, url_for, session
import os, json

app = Flask(__name__)
app.secret_key = 'recoilsecret'
SAVE_FILE = 'data.json'

if not os.path.exists(SAVE_FILE):
    with open(SAVE_FILE, 'w') as f:
        json.dump({}, f)

with open(SAVE_FILE) as f:
    users = json.load(f)

ROLES = {
    '–í–ª–∞–¥–µ–ª–µ—Ü': 'üëë',
    '–ì–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω': '‚≠ê',
    '–ê–¥–º–∏–Ω': 'üõ°',
    '–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä': 'üîß',
    '–ö—É—Ä–∞—Ç–æ—Ä': 'üéì',
    '–û—Å–∏–Ω—Ç–µ—Ä': 'üïµÔ∏è',
    '–ö—Å–∏–Ω—Ç–µ—Ä': 'üß†',
    '–°–Ω–æ—Å–µ—Ä': 'üí£',
    '–£—á–∞—Å—Ç–Ω–∏–∫': 'üë§'
}

@app.route('/')
def index():
    username = session.get('username')
    user = users.get(username, {}) if username else {}
    return render_template('index.html', username=username, role=user.get('role', ''), emoji=ROLES.get(user.get('role', ''), ''))

@app.route('/login', methods=['POST'])
def login():
    username = request.form['username']
    role = request.form['role']
    users[username] = {'role': role}
    with open(SAVE_FILE, 'w') as f:
        json.dump(users, f)
    session['username'] = username
    return redirect(url_for('index'))

@app.route('/logout')
def logout():
    session.pop('username', None)
    return redirect(url_for('index'))

@app.route('/roles')
def roles():
    return render_template('roles.html', roles=ROLES)

if __name__ == '__main__':
    app.run(debug=True) 
